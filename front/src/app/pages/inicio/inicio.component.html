<div class="confirmar-container">
  <h2>Sistema de Elecciones Electrónicas</h2>

  <div class="datos-usuario" *ngIf="usuario">
    <p><strong>Nombre:</strong> {{ usuario.nombre }} {{ usuario.apellido }}</p>
    <p><strong>Departamento:</strong> {{ usuario.departamento }}</p>
    <p><strong>Cédula:</strong> {{ usuario.cedula }}</p>
    <p><strong>Circuito donde vota:</strong> {{ usuario.circuito }} - {{ usuario.direccion_establecimiento }}</p>
    <p><strong>Rol:</strong> {{ usuario.rol }}</p>
    <p *ngIf="usuario?.rol === 'FUNCIONARIO'">
      <strong>Circuito asignado:</strong>
      {{ circuitoFunc?.numero }} -  {{ circuitoFunc?.departamento }}
    </p>
    <p *ngIf="usuario?.rol === 'FUNCIONARIO'">
      <strong>Direccion:</strong>
      {{ circuitoFunc?.establecimiento }}
    </p>
    <p *ngIf="usuario?.rol === 'FUNCIONARIO'">
      <strong>Circuito cerrado:</strong>
      {{ circuitoFunc?.circuito_cerrado ? 'Sí' : 'No' }}
    </p>
    
  </div>

  <div class="acciones-comunes">
    <h3>Acciones Generales</h3>
    <div class="botones-grupo">
      <button mat-raised-button color="primary" (click)="irAVotar()">
        <mat-icon>how_to_vote</mat-icon>
        Votar
      </button>
      <button mat-raised-button color="accent" (click)="verResultados()">
        <mat-icon>analytics</mat-icon>
        Ver Resultados
      </button>
    </div>
  </div>

  <!-- Agrupación de botones específicos para ADMIN -->
  <ng-container *ngIf="usuario?.rol === 'ADMIN'">
    <div class="seccion-rol">
      <h3>Gestión de Elecciones</h3>
      <div class="botones-grupo">
        <button mat-raised-button color="primary" (click)="abrirEleccion()">
          <mat-icon>lock_open</mat-icon>
          Abrir Todas las Mesas
        </button>
        <button mat-raised-button color="warn" (click)="cerrarEleccion()">
          <mat-icon>lock</mat-icon>
          Cerrar Todas las Mesas
        </button>
      </div>
    </div>

    <div class="seccion-rol">
      <h3>Gestión de Ciudadanos y Padrón</h3>
      <div class="botones-grupo">
        <button mat-raised-button color="primary" (click)="crearEleccion()">
          <mat-icon>person_add</mat-icon>
          Gestionar Ciudadanos
        </button>
        <button mat-raised-button color="accent" (click)="actualizarPadronDirecto()">
          <mat-icon>update</mat-icon>
          Actualizar Padrón
        </button>
      </div>
      <div *ngIf="mensajePadron" style="margin-top: 10px; color: #1976d2; font-weight: 500; text-align: center;">{{ mensajePadron }}</div>
      <div *ngIf="cargandoPadron" style="margin-top: 10px; color: #888; font-weight: 500; text-align: center;">Actualizando padrón...</div>
    </div>

    <div class="seccion-rol">
      <h3>Gestión de Autoridades y Personal</h3>
      <div class="botones-grupo">
        <button mat-raised-button color="accent" (click)="editarCircuito()">
          <mat-icon>admin_panel_settings</mat-icon>
          Modificar Autoridades
        </button>
        <button mat-raised-button color="accent" (click)="editarEstablecimiento()">
          <mat-icon>business</mat-icon>
          Gestionar Empleados
        </button>
        <button mat-raised-button color="accent" (click)="gestionarPolicias()">
          <mat-icon>local_police</mat-icon>
          Gestionar Policías
        </button>
      </div>
    </div>
  </ng-container>

  <!-- Botones específicos para FUNCIONARIO (Integrante de mesa) -->
  <ng-container *ngIf="usuario?.rol === 'FUNCIONARIO'">
    <div class="seccion-rol">
      <h3>Gestión de Mesa</h3>
      <div class="botones-grupo">
        <button mat-raised-button color="primary" (click)="abrirMesa()">
          <mat-icon>lock_open</mat-icon>
          Abrir Mesa
        </button>
        <button mat-raised-button color="warn" (click)="cerrarMesa()">
          <mat-icon>lock</mat-icon>
          Cerrar Mesa
        </button>
        <button mat-raised-button color="accent" (click)="validarVotante()">
          <mat-icon>verified_user</mat-icon>
          Validar Votante
        </button>
      </div>
    </div>
  </ng-container>
</div>